"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[752],{1468:function(t,s,e){e.d(s,{D:function(){return u}});var r=e(8683),i=(e(2791),e(8687)),n=e(7689),o=e(184),a=function(t){return{isAuth:t.auth.isAuth}},u=function(t){return(0,i.$j)(a)((function(s){return s.isAuth?(0,o.jsx)(t,(0,r.Z)({},s)):(0,o.jsx)(n.Fg,{to:"/login"})}))}},752:function(t,s,e){e.r(s),e.d(s,{default:function(){return E}});var r=e(5671),i=e(3144),n=e(136),o=e(516),a=e(8683),u=e(2791),c=e(6868),l="MyPosts_postsBlock__oMh4e",d="MyPosts_posts__akUw3",f="Post_item__TJtwx",h=e(184),p=function(t){return(0,h.jsxs)("div",{className:f,children:[(0,h.jsx)("img",{src:"https://avatars.mds.yandex.net/i?id=d00a6fb936bd9fff05de6cabc7c4ccfc3d705469-8399918-images-thumbs&n=13",alt:"..."}),t.message,(0,h.jsx)("div",{children:(0,h.jsxs)("span",{children:["Like: ",t.likesCount]})})]})},x=e(6139),j=e(704),v=e(7492),m=u.memo((function(t){var s=t.posts.map((function(t){return(0,h.jsx)(p,{message:t.post,likesCount:t.likesCount},t.id)}));return(0,h.jsxs)("div",{className:l,children:[(0,h.jsx)("h3",{children:"My posts"}),(0,h.jsx)(b,{onSubmit:function(s){var e=s.postText;t.addPostFunc(e)}}),(0,h.jsx)("div",{className:d,children:s})]})})),b=(0,j.Z)({form:"newPostText"})((function(t){return(0,h.jsxs)("form",{onSubmit:t.handleSubmit,children:[(0,h.jsx)("div",{children:(0,h.jsx)(x.Z,{name:"postText",placeholder:"Add new post",component:v.gx})}),(0,h.jsx)("div",{children:(0,h.jsx)("button",{children:"Add post"})})]})})),P=m,g=e(8687),k=(0,g.$j)((function(t){return{posts:t.profilePage.posts,newPostText:t.profilePage.newPostText}}),(function(t){return{addPostFunc:function(s){t((0,c.Wl)(s))}}}))(P),S=e(9439),I=e(5987),A={descriptionBlock:"ProfileInfo_descriptionBlock__xBY7d",userProfileAvatar:"ProfileInfo_userProfileAvatar__FnGsK"},U=e(9346),Z=e(9624),w=function(t){var s=(0,u.useState)(!1),e=(0,S.Z)(s,2),r=e[0],i=e[1],n=(0,u.useState)(t.status),o=(0,S.Z)(n,2),a=o[0],c=o[1];return(0,u.useEffect)((function(){c(t.status)}),[t.status]),(0,h.jsxs)("div",{children:[!r&&(0,h.jsx)("div",{children:(0,h.jsxs)("span",{onDoubleClick:function(){i(!0)},children:[(0,h.jsx)("b",{children:"Status"}),": ",t.status||"The status is not set"]})}),r&&(0,h.jsx)("div",{children:(0,h.jsx)("input",{onChange:function(t){c(t.currentTarget.value)},onBlur:function(){i(!1),t.updateUserStatus(a)},autoFocus:!0,value:a})})]})},y=e(9234),_=(0,j.Z)({form:"editProfile"})((function(t){var s=t.handleSubmit,e=t.profile,r=t.error;return(0,h.jsxs)("form",{onSubmit:s,children:[(0,h.jsx)("div",{children:(0,h.jsx)("button",{children:"Save"})}),r&&(0,h.jsx)("div",{className:y.Z.formSummaryError,children:r}),(0,h.jsxs)("div",{children:[" ",(0,h.jsx)("b",{children:"Name"}),": ",(0,v.Gr)("Name","fullName",[],v.II)," "]}),(0,h.jsxs)("div",{children:[" ",(0,h.jsx)("b",{children:"About me"}),": ",(0,v.Gr)("About me","aboutMe",[],v.II)]}),(0,h.jsxs)("div",{children:[" ",(0,h.jsx)("b",{children:"Looking for a job"}),": ",(0,v.Gr)("Looking for a job","lookingForAJob",[],v.II,{type:"checkbox"})]}),(0,h.jsxs)("div",{children:[" ",(0,h.jsx)("b",{children:"Professional skills"}),": ",(0,v.Gr)("Professional skills","lookingForAJobDescription",[],v.gx)]}),(0,h.jsxs)("div",{children:[" ",(0,h.jsx)("b",{children:"Contacts"}),": ",Object.keys(e.data.contacts).map((function(t){return(0,h.jsx)("div",{children:(0,h.jsxs)("b",{children:[t,": ",(0,v.Gr)(t,"contact."+t,[],v.II)]})},t)}))," "]})]})})),T=["profile","status","updateUserStatus","isOwner","savePhoto","saveProfile"],C=function(t){var s=t.contactTitle,e=t.contactValue;return(0,h.jsxs)("div",{children:[(0,h.jsx)("b",{children:s}),": ",e]})},N=function(t){var s=t.profile,e=t.isOwner,r=t.goToEditMode;return(0,h.jsxs)("div",{children:[e&&(0,h.jsx)("div",{children:(0,h.jsx)("button",{onClick:r,children:"Edit"})}),(0,h.jsxs)("div",{children:[" ",(0,h.jsx)("b",{children:"Name"}),":  ",s.data.fullName]}),(0,h.jsxs)("div",{children:[" ",(0,h.jsx)("b",{children:"About me"}),": ",s.data.aboutMe]}),(0,h.jsxs)("div",{children:[" ",(0,h.jsx)("b",{children:"Looking for a job"}),": ",s.data.lookingForAJob?"yes":"no"]}),(0,h.jsxs)("div",{children:[" ",(0,h.jsx)("b",{children:"About job"}),": ",s.data.lookingForAJobDescription]}),(0,h.jsxs)("div",{children:[" ",(0,h.jsx)("b",{children:"Contacts"}),": ",Object.keys(s.data.contacts).map((function(t){return(0,h.jsx)(C,{contactTitle:t,contactValue:s.data.contacts[t]},t)}))," "]})]})},O=function(t){var s=t.profile,e=t.status,r=t.updateUserStatus,i=t.isOwner,n=t.savePhoto,o=t.saveProfile,a=(0,I.Z)(t,T),c=(0,u.useState)(!1),l=(0,S.Z)(c,2),d=l[0],f=l[1];if(!s)return(0,h.jsx)(U.Z,{});var p=s.data.photos.small;return(0,h.jsx)("div",{children:(0,h.jsx)("div",{className:A.descriptionBlock,children:(0,h.jsxs)("div",{className:A.profileInfo,children:[(0,h.jsx)("img",{className:A.userProfileAvatar,src:p||Z,alt:"..."}),i&&(0,h.jsx)("input",{type:"file",onChange:function(t){t.target.files.length&&n(t.target.files[0])}}),d?(0,h.jsx)(_,{profile:s,onSubmit:function(t){o(t).then((function(){f(!1),a.updateUserStatus(e),setTimeout((function(){window.location.reload()}),1e3)}))},initialValues:s.data}):(0,h.jsx)(N,{profile:s,isOwner:i,goToEditMode:function(){f(!0)}}),(0,h.jsx)(w,{status:e,updateUserStatus:r})]})})})},F=function(t){return(0,h.jsxs)("div",{children:[(0,h.jsx)(O,{savePhoto:t.savePhoto,isOwner:t.isOwner,profile:t.profile,status:t.status,updateUserStatus:t.updateUserStatus,saveProfile:t.saveProfile}),(0,h.jsx)(k,{profile:t.profile})]})},M=e(7689),D=e(27),B=e(7781),G=e(1468);var J=function(t){(0,n.Z)(e,t);var s=(0,o.Z)(e);function e(){return(0,r.Z)(this,e),s.apply(this,arguments)}return(0,i.Z)(e,[{key:"refreshProfile",value:function(){var t=this.props.router.params.userId;t||(t=this.props.authorizedUserId)||(0,D.uX)("/login"),this.props.getUserProfile(t),this.props.getUserStatus(t)}},{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(t,s){this.props.router.params.userId!=t.router.params.userId&&this.refreshProfile()}},{key:"render",value:function(){return(0,h.jsx)(F,(0,a.Z)((0,a.Z)({},this.props),{},{savePhoto:this.props.savePhoto,isOwner:!this.props.router.params.userId,profile:this.props.profile,status:this.props.status,updateStatus:this.props.updateUserStatus}))}}]),e}(u.Component),E=(0,B.qC)((0,g.$j)((function(t){return{profile:t.profilePage.profile,status:t.profilePage.status,authorizedUserId:t.auth.userId,isAuth:t.auth.isAuth}}),{getUserProfile:c.et,getUserStatus:c.Tq,updateUserStatus:c.OL,savePhoto:c.Ju,saveProfile:c.Ii}),(function(t){return function(s){var e=(0,M.TH)(),r=(0,M.s0)(),i=(0,M.UO)();return(0,h.jsx)(t,(0,a.Z)((0,a.Z)({},s),{},{router:{location:e,navigate:r,params:i}}))}}),G.D)(J)}}]);
//# sourceMappingURL=752.d9aa96d2.chunk.js.map